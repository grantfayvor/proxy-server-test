var httpProxy = require("http-proxy"),
  http = require("http"),
  https = require("https"),
  HttpProxyRules = require("http-proxy-rules"),
  fs = require("fs"),
  clientCert = fs.readFileSync(__dirname + "/superc-crt.pem"),
  clientKey = fs.readFileSync(__dirname + "/superc-key.pem"),
  caCert = fs.readFileSync(__dirname + "/ca-crt.pem");

var defaultProxy = httpProxy.createProxy({
  target: {
    host: "localhost",
    port: "3000",
    protocol: "http:"
  }
})

var proxyToDynamo = httpProxy.createProxy({
  target: {
    host: "localhost",
    port: "4433",
    protocol: "https:",
    https: true,
    key: clientKey,
    cert: clientCert,
    ca: caCert
  },
  headers: {
    Authorization: "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE1NjQ3NDcwMzEsImRhdGEiOnsidXNlcm5hbWUiOiJhZG1pbiIsIl9pZCI6IjU5YWE3YjRkNWNkZWE4MjE5MGYzNzVhYSIsInJvbGVzIjpbeyJfaWQiOiI1OWFhN2I0ZDVjZGVhODIxOTBmMzc1YTkiLCJuYW1lIjoiZGV2ZWxvcGVyIiwiYmFkZ3V5Ijp0cnVlLCJjbGFpbXMiOlt7Il9pZCI6IjU5YjE2M2VjNDc1YmRhMTU1Y2M5YWYyYyIsInR5cGUiOiJjYW4tbWFuYWdlLWRvbWFpbnMiLCJkZXNjcmlwdGlvbiI6ImNhbi1tYW5hZ2UtZG9tYWlucyIsIl9fdiI6MH0seyJfaWQiOiI1OWFhN2I0ZDVjZGVhODIxOTBmMzc1YTMiLCJ0eXBlIjoiY2FuLW1hbmFnZS1jbGFpbXMiLCJkZXNjcmlwdGlvbiI6ImNhbi1tYW5hZ2UtY2xhaW1zIiwiX192IjowfSx7Il9pZCI6IjU5YWE3YjRkNWNkZWE4MjE5MGYzNzVhNCIsInR5cGUiOiJjYW4tbWFuYWdlLXJvbGVzIiwiZGVzY3JpcHRpb24iOiJjYW4tbWFuYWdlLXJvbGVzIiwiX192IjowfSx7Il9pZCI6IjU5YWE3YjRkNWNkZWE4MjE5MGYzNzVhNSIsInR5cGUiOiJjYW4tbWFuYWdlLW1lbnVzIiwiZGVzY3JpcHRpb24iOiJjYW4tbWFuYWdlLW1lbnVzIiwiX192IjowfSx7Il9pZCI6IjU5YWE3YjRkNWNkZWE4MjE5MGYzNzVhNiIsInR5cGUiOiJjYW4tbWFuYWdlLXVzZXJzIiwiZGVzY3JpcHRpb24iOiJjYW4tbWFuYWdlLXVzZXJzIiwiX192IjowfSx7Il9pZCI6IjU5YWE3YjRkNWNkZWE4MjE5MGYzNzVhNyIsInR5cGUiOiJtYW5hZ2UtZGVmYXVsdC1wcm9jZXNzIiwiZGVzY3JpcHRpb24iOiJtYW5hZ2UtZGVmYXVsdC1wcm9jZXNzIiwiX192IjowfSx7Il9pZCI6IjU5YWE3YjRkNWNkZWE4MjE5MGYzNzVhOCIsInR5cGUiOiJodHRwOi8vd3d3LmR5bmFtby5jb20vcHJvY2VzcyIsImRlc2NyaXB0aW9uIjoiRWRpdCBhIHByb2Nlc3MiLCJ2YWx1ZSI6IkNSRUFURV9QUk9DRVNTIiwiX192IjowfSx7Il9pZCI6IjU5YWE3YjRkNWNkZWE4MjE5MGYzNzViYyIsInR5cGUiOiJodHRwOi8vd3d3LmR5bmFtby5jb20vcHJvY2Vzc29yIiwiZGVzY3JpcHRpb24iOiJGZXRjaCBzY2hlbWEiLCJ2YWx1ZSI6IjU5YWE3YjRkZDVmYWE0MjE5MDI2YmFiZSIsIl9fdiI6MH0seyJfaWQiOiI1OWFhN2I0ZDVjZGVhODIxOTBmMzc1YjAiLCJ0eXBlIjoiaHR0cDovL3d3dy5keW5hbW8uY29tL3Byb2Nlc3NvciIsImRlc2NyaXB0aW9uIjoiTGlzdHMgYXN5bmMgdmFsaWRhdG9ycyIsInZhbHVlIjoiNTlhYTdiNGRkNWZhYTQyMTkwMjZiYWIyIiwiX192IjowfSx7Il9pZCI6IjU5YWE3YjRkNWNkZWE4MjE5MGYzNzViMyIsInR5cGUiOiJodHRwOi8vd3d3LmR5bmFtby5jb20vcHJvY2Vzc29yIiwiZGVzY3JpcHRpb24iOiJMaXN0cyBpbnB1dCB0eXBlcyIsInZhbHVlIjoiNTlhYTdiNGRkNWZhYTQyMTkwMjZiYWI1IiwiX192IjowfSx7Il9pZCI6IjU5YWE3YjRkNWNkZWE4MjE5MGYzNzViOCIsInR5cGUiOiJodHRwOi8vd3d3LmR5bmFtby5jb20vcHJvY2Vzc29yIiwiZGVzY3JpcHRpb24iOiJDcmVhdGUgb3IgRWRpdCBMaWIiLCJ2YWx1ZSI6IjU5YWE3YjRkZDVmYWE0MjE5MDI2YmFiYSIsIl9fdiI6MH0seyJfaWQiOiI1OWFhN2I0ZDVjZGVhODIxOTBmMzc1YWUiLCJ0eXBlIjoiaHR0cDovL3d3dy5keW5hbW8uY29tL3Byb2Nlc3NvciIsImRlc2NyaXB0aW9uIjoiTGlzdHMgRW50aXRpZXMgcGVyIHF1ZXJ5IiwidmFsdWUiOiI1OWFhN2I0ZGQ1ZmFhNDIxOTAyNmJhYjAiLCJfX3YiOjB9LHsiX2lkIjoiNTlhYTdiNGQ1Y2RlYTgyMTkwZjM3NWFmIiwidHlwZSI6Imh0dHA6Ly93d3cuZHluYW1vLmNvbS9wcm9jZXNzb3IiLCJkZXNjcmlwdGlvbiI6Ikxpc3RzIHByb2Nlc3NvcnMiLCJ2YWx1ZSI6IjU5YWE3YjRkZDVmYWE0MjE5MDI2YmFiMSIsIl9fdiI6MH0seyJfaWQiOiI1OWFhN2I0ZDVjZGVhODIxOTBmMzc1YjkiLCJ0eXBlIjoiaHR0cDovL3d3dy5keW5hbW8uY29tL3Byb2Nlc3NvciIsImRlc2NyaXB0aW9uIjoiRmV0Y2ggYSBzaW5nbGUgRW50aXR5IiwidmFsdWUiOiI1OWFhN2I0ZGQ1ZmFhNDIxOTAyNmJhYmIiLCJfX3YiOjB9LHsiX2lkIjoiNTlhYTdiNGQ1Y2RlYTgyMTkwZjM3NWJhIiwidHlwZSI6Imh0dHA6Ly93d3cuZHluYW1vLmNvbS9wcm9jZXNzb3IiLCJkZXNjcmlwdGlvbiI6Ik1lbnUgRmlsdGVyIiwidmFsdWUiOiI1OWFhN2I0ZGQ1ZmFhNDIxOTAyNmJhYmMiLCJfX3YiOjB9LHsiX2lkIjoiNTlhYTdiNGQ1Y2RlYTgyMTkwZjM3NWIyIiwidHlwZSI6Imh0dHA6Ly93d3cuZHluYW1vLmNvbS9wcm9jZXNzb3IiLCJkZXNjcmlwdGlvbiI6Ikxpc3RzIGxpYnMiLCJ2YWx1ZSI6IjU5YWE3YjRkZDVmYWE0MjE5MDI2YmFiNCIsIl9fdiI6MH0seyJfaWQiOiI1OWFhN2I0ZDVjZGVhODIxOTBmMzc1YjEiLCJ0eXBlIjoiaHR0cDovL3d3dy5keW5hbW8uY29tL3Byb2Nlc3NvciIsImRlc2NyaXB0aW9uIjoiTGlzdHMgcHJvY2Vzc2VzIiwidmFsdWUiOiI1OWFhN2I0ZGQ1ZmFhNDIxOTAyNmJhYjMiLCJfX3YiOjB9LHsiX2lkIjoiNTlhYTdiNGQ1Y2RlYTgyMTkwZjM3NWI2IiwidHlwZSI6Imh0dHA6Ly93d3cuZHluYW1vLmNvbS9wcm9jZXNzb3IiLCJkZXNjcmlwdGlvbiI6IkNyZWF0ZSBQcm9jZXNzIiwidmFsdWUiOiI1OWFhN2I0ZGQ1ZmFhNDIxOTAyNmJhYjgiLCJfX3YiOjB9LHsiX2lkIjoiNTlhYTdiNGQ1Y2RlYTgyMTkwZjM3NWI1IiwidHlwZSI6Imh0dHA6Ly93d3cuZHluYW1vLmNvbS9wcm9jZXNzb3IiLCJkZXNjcmlwdGlvbiI6IkZldGNoIFByb2Nlc3MiLCJ2YWx1ZSI6IjU5YWE3YjRkZDVmYWE0MjE5MDI2YmFiNyIsIl9fdiI6MH0seyJfaWQiOiI1OWFhN2I0ZDVjZGVhODIxOTBmMzc1YmUiLCJ0eXBlIjoiaHR0cDovL3d3dy5keW5hbW8uY29tL3Byb2Nlc3NvciIsImRlc2NyaXB0aW9uIjoiVXBkYXRlIFNjaGVtYSIsInZhbHVlIjoiNTlhYTdiNGRkNWZhYTQyMTkwMjZiYWMwIiwiX192IjowfSx7Il9pZCI6IjU5YWE3YjRkNWNkZWE4MjE5MGYzNzViYiIsInR5cGUiOiJodHRwOi8vd3d3LmR5bmFtby5jb20vcHJvY2Vzc29yIiwiZGVzY3JpcHRpb24iOiJMaXN0IHNjaGVtYXMiLCJ2YWx1ZSI6IjU5YWE3YjRkZDVmYWE0MjE5MDI2YmFiZCIsIl9fdiI6MH0seyJfaWQiOiI1OWFhN2I0ZDVjZGVhODIxOTBmMzc1YjQiLCJ0eXBlIjoiaHR0cDovL3d3dy5keW5hbW8uY29tL3Byb2Nlc3NvciIsImRlc2NyaXB0aW9uIjoiTGlzdHMgZWxlbWVudCB0eXBlcyIsInZhbHVlIjoiNTlhYTdiNGRkNWZhYTQyMTkwMjZiYWI2IiwiX192IjowfSx7Il9pZCI6IjU5YWE3YjRkNWNkZWE4MjE5MGYzNzViNyIsInR5cGUiOiJodHRwOi8vd3d3LmR5bmFtby5jb20vcHJvY2Vzc29yIiwiZGVzY3JpcHRpb24iOiJDcmVhdGUgb3IgRWRpdCBQcm9jZXNzb3IiLCJ2YWx1ZSI6IjU5YWE3YjRkZDVmYWE0MjE5MDI2YmFiOSIsIl9fdiI6MH0seyJfaWQiOiI1OWFhN2I0ZDVjZGVhODIxOTBmMzc1YmQiLCJ0eXBlIjoiaHR0cDovL3d3dy5keW5hbW8uY29tL3Byb2Nlc3NvciIsImRlc2NyaXB0aW9uIjoiQ3JlYXRlIFNjaGVtYSIsInZhbHVlIjoiNTlhYTdiNGRkNWZhYTQyMTkwMjZiYWJmIiwiX192IjowfSx7Il9pZCI6IjU5YWE3YjRlNWNkZWE4MjE5MGYzNzVjMCIsInR5cGUiOiJodHRwOi8vd3d3LmR5bmFtby5jb20vcHJvY2VzcyIsImRlc2NyaXB0aW9uIjoiTWFuYWdlIFByb2Nlc3MiLCJ2YWx1ZSI6IjU5YWE3YjRlZDVmYWE0MjE5MDI2YmFkMSIsIl9fdiI6MH0seyJfaWQiOiI1OWFhN2I0ZTVjZGVhODIxOTBmMzc1YmYiLCJ0eXBlIjoiaHR0cDovL3d3dy5keW5hbW8uY29tL3Byb2Nlc3MiLCJkZXNjcmlwdGlvbiI6Ik1hbmFnZSBMaWJyYXJpZXMiLCJ2YWx1ZSI6IjU5YWE3YjRlZDVmYWE0MjE5MDI2YmFkMCIsIl9fdiI6MH0seyJfaWQiOiI1OWFhN2I0ZTVjZGVhODIxOTBmMzc1YzEiLCJ0eXBlIjoiaHR0cDovL3d3dy5keW5hbW8uY29tL3Byb2Nlc3MiLCJkZXNjcmlwdGlvbiI6Ik1hbmFnZSBQcm9jZXNzb3JzIiwidmFsdWUiOiI1OWFhN2I0ZWQ1ZmFhNDIxOTAyNmJhZDIiLCJfX3YiOjB9LHsiX2lkIjoiNTlhYTdiNGU1Y2RlYTgyMTkwZjM3NWMyIiwidHlwZSI6Imh0dHA6Ly93d3cuZHluYW1vLmNvbS9wcm9jZXNzIiwiZGVzY3JpcHRpb24iOiJNYW5hZ2UgU2NoZW1hcyIsInZhbHVlIjoiNTlhYTdiNGVkNWZhYTQyMTkwMjZiYWQzIiwiX192IjowfSx7Il9pZCI6IjU5YWE3YjRlNWNkZWE4MjE5MGYzNzVjMyIsInR5cGUiOiJodHRwOi8vd3d3LmR5bmFtby5jb20vcHJvY2VzcyIsImRlc2NyaXB0aW9uIjoiQ3JlYXRlIFByb2Nlc3MiLCJ2YWx1ZSI6IjU5YWE3YjRlZDVmYWE0MjE5MDI2YmFkOSIsIl9fdiI6MH0seyJfaWQiOiI1OWFhODQyOTVlODAwNTE1MDA5ZmExOTgiLCJ0eXBlIjoiaHR0cDovL3d3dy5keW5hbW8uY29tL3Byb2Nlc3MiLCJkZXNjcmlwdGlvbiI6Ik1hbmFnZSBTZXNzaW9uIiwidmFsdWUiOiI1OWFhODQyOTFkNGQ3MTE1MDBlMmFjODAiLCJfX3YiOjB9LHsiX2lkIjoiNTlhYTg0ZGU1ZTgwMDUxNTAwOWZhMTlhIiwidHlwZSI6Imh0dHA6Ly93d3cuZHluYW1vLmNvbS9wcm9jZXNzIiwiZGVzY3JpcHRpb24iOiJNYW5hZ2UgTW9kZU9mU3R1ZHkiLCJ2YWx1ZSI6IjU5YWE4NGRlMWQ0ZDcxMTUwMGUyYWM4NSIsIl9fdiI6MH0seyJfaWQiOiI1OWFhODUzMzVlODAwNTE1MDA5ZmExOWMiLCJ0eXBlIjoiaHR0cDovL3d3dy5keW5hbW8uY29tL3Byb2Nlc3MiLCJkZXNjcmlwdGlvbiI6Ik1hbmFnZSBSZWxpZ2lvbiIsInZhbHVlIjoiNTlhYTg1MzMxZDRkNzExNTAwZTJhYzhhIiwiX192IjowfSx7Il9pZCI6IjU5YWE4NTZhNWU4MDA1MTUwMDlmYTE5ZSIsInR5cGUiOiJodHRwOi8vd3d3LmR5bmFtby5jb20vcHJvY2VzcyIsImRlc2NyaXB0aW9uIjoiTWFuYWdlIFJlbGF0aW9uc2hpcCIsInZhbHVlIjoiNTlhYTg1NmExZDRkNzExNTAwZTJhYzhmIiwiX192IjowfSx7Il9pZCI6IjU5YWE4NTliNWU4MDA1MTUwMDlmYTFhMCIsInR5cGUiOiJodHRwOi8vd3d3LmR5bmFtby5jb20vcHJvY2VzcyIsImRlc2NyaXB0aW9uIjoiTWFuYWdlIFN0YXRlIiwidmFsdWUiOiI1OWFhODU5YjFkNGQ3MTE1MDBlMmFjOTQiLCJfX3YiOjB9LHsiX2lkIjoiNTlhYTg1ZTY1ZTgwMDUxNTAwOWZhMWEyIiwidHlwZSI6Imh0dHA6Ly93d3cuZHluYW1vLmNvbS9wcm9jZXNzIiwiZGVzY3JpcHRpb24iOiJNYW5hZ2UgU2Nob29sUHJvZ3JhbW1lIiwidmFsdWUiOiI1OWFhODVlNjFkNGQ3MTE1MDBlMmFjOTkiLCJfX3YiOjB9LHsiX2lkIjoiNTlhYTg2NWE1ZTgwMDUxNTAwOWZhMWE0IiwidHlwZSI6Imh0dHA6Ly93d3cuZHluYW1vLmNvbS9wcm9jZXNzIiwiZGVzY3JpcHRpb24iOiJNYW5hZ2UgTW9kZU9mRW50cnkiLCJ2YWx1ZSI6IjU5YWE4NjVhMWQ0ZDcxMTUwMGUyYWM5ZSIsIl9fdiI6MH0seyJfaWQiOiI1OWFhODZhNDVlODAwNTE1MDA5ZmExYTYiLCJ0eXBlIjoiaHR0cDovL3d3dy5keW5hbW8uY29tL3Byb2Nlc3MiLCJkZXNjcmlwdGlvbiI6Ik1hbmFnZSBTdHVkZW50VHlwZSIsInZhbHVlIjoiNTlhYTg2YTQxZDRkNzExNTAwZTJhY2EzIiwiX192IjowfSx7Il9pZCI6IjU5YWE4NmRiNWU4MDA1MTUwMDlmYTFhOCIsInR5cGUiOiJodHRwOi8vd3d3LmR5bmFtby5jb20vcHJvY2VzcyIsImRlc2NyaXB0aW9uIjoiTWFuYWdlIEFkbWlzc2lvblR5cGUiLCJ2YWx1ZSI6IjU5YWE4NmRiMWQ0ZDcxMTUwMGUyYWNhOCIsIl9fdiI6MH0seyJfaWQiOiI1OWFhODc1NjVlODAwNTE1MDA5ZmExYWEiLCJ0eXBlIjoiaHR0cDovL3d3dy5keW5hbW8uY29tL3Byb2Nlc3MiLCJkZXNjcmlwdGlvbiI6Ik1hbmFnZSBDbGVhcmFuY2VEb2N1bWVudCIsInZhbHVlIjoiNTlhYTg3NTYxZDRkNzExNTAwZTJhY2FkIiwiX192IjowfSx7Il9pZCI6IjU5YWE4N2YxNWU4MDA1MTUwMDlmYTFhYyIsInR5cGUiOiJodHRwOi8vd3d3LmR5bmFtby5jb20vcHJvY2VzcyIsImRlc2NyaXB0aW9uIjoiTWFuYWdlIE1lZGljYWxSZWNvcmQiLCJ2YWx1ZSI6IjU5YWE4N2YxMWQ0ZDcxMTUwMGUyYWNiMiIsIl9fdiI6MH0seyJfaWQiOiI1OWFkNGRjZTAxMjZjNzM1MTBkYzc1MTEiLCJ0eXBlIjoiaHR0cDovL3d3dy5keW5hbW8uY29tL3Byb2Nlc3NvciIsImRlc2NyaXB0aW9uIjoiR2V0IFVOTl9FeGlzdGluZ19TdHVkZW50IiwidmFsdWUiOiI1OWFkNGRjZTlkM2NiMDM1MTAxMmU4NDEiLCJfX3YiOjB9LHsiX2lkIjoiNTlhZTkyMGYwOTljNWQxNmFjZjc3YTc4IiwidHlwZSI6Imh0dHA6Ly93d3cuZHluYW1vLmNvbS9wcm9jZXNzIiwiZGVzY3JpcHRpb24iOiJNYW5hZ2UgWWVhck9mU3R1ZHkiLCJ2YWx1ZSI6IjU5YWU5MjBmMGVmYjZlMTZhY2Y4NGJjZCIsIl9fdiI6MH0seyJfaWQiOiI1OWFlOTIwZjA5OWM1ZDE2YWNmNzdhNzYiLCJ0eXBlIjoiaHR0cDovL3d3dy5keW5hbW8uY29tL3Byb2Nlc3NvciIsImRlc2NyaXB0aW9uIjoiR2V0IFllYXJPZlN0dWR5IiwidmFsdWUiOiI1OWFlOTIwZjBlZmI2ZTE2YWNmODRiY2EiLCJfX3YiOjB9LHsiX2lkIjoiNTlhZTkyMGYwOTljNWQxNmFjZjc3YTc1IiwidHlwZSI6Imh0dHA6Ly93d3cuZHluYW1vLmNvbS9wcm9jZXNzb3IiLCJkZXNjcmlwdGlvbiI6IkNyZWF0ZSBZZWFyT2ZTdHVkeSIsInZhbHVlIjoiNTlhZTkyMGYwZWZiNmUxNmFjZjg0YmM4IiwiX192IjowfSx7Il9pZCI6IjU5YWU5MjBmMDk5YzVkMTZhY2Y3N2E3OCIsInR5cGUiOiJodHRwOi8vd3d3LmR5bmFtby5jb20vcHJvY2VzcyIsImRlc2NyaXB0aW9uIjoiTWFuYWdlIFllYXJPZlN0dWR5IiwidmFsdWUiOiI1OWFlOTIwZjBlZmI2ZTE2YWNmODRiY2QiLCJfX3YiOjB9LHsiX2lkIjoiNTlhZTkyMGYwOTljNWQxNmFjZjc3YTc3IiwidHlwZSI6Imh0dHA6Ly93d3cuZHluYW1vLmNvbS9wcm9jZXNzb3IiLCJkZXNjcmlwdGlvbiI6IlVwZGF0ZSBZZWFyT2ZTdHVkeSIsInZhbHVlIjoiNTlhZTkyMGYwZWZiNmUxNmFjZjg0YmM5IiwiX192IjowfSx7Il9pZCI6IjU5YjE2OTM3YTM2NjY4MWM5NDgzY2UyMSIsInR5cGUiOiJodHRwOi8vd3d3LmR5bmFtby5jb20vcHJvY2Vzc29yIiwiZGVzY3JpcHRpb24iOiJHZXQgRG9tYWlucyIsInZhbHVlIjoiNTliMTY5MzdlN2ZmZjgxYzk0MzlmZGUzIiwiX192IjowfSx7Il9pZCI6IjU5YjY3MDJmNTUwNGMyM2I4ODdlZmQ0NiIsInR5cGUiOiJodHRwOi8vd3d3LmR5bmFtby5jb20vcHJvY2Vzc29yIiwiZGVzY3JpcHRpb24iOiJDcmVhdGUgUmVwb3J0IiwidmFsdWUiOiI1OWI2NzAyZmVlM2NiOTNiODgwNjBmYjYiLCJfX3YiOjB9LHsiX2lkIjoiNTliNjcwMmY1NTA0YzIzYjg4N2VmZDQ3IiwidHlwZSI6Imh0dHA6Ly93d3cuZHluYW1vLmNvbS9wcm9jZXNzb3IiLCJkZXNjcmlwdGlvbiI6IkdldCBSZXBvcnQiLCJ2YWx1ZSI6IjU5YjY3MDJmZWUzY2I5M2I4ODA2MGZiOCIsIl9fdiI6MH0seyJfaWQiOiI1OWI2NzAyZjU1MDRjMjNiODg3ZWZkNDgiLCJ0eXBlIjoiaHR0cDovL3d3dy5keW5hbW8uY29tL3Byb2Nlc3NvciIsImRlc2NyaXB0aW9uIjoiVXBkYXRlIFJlcG9ydCIsInZhbHVlIjoiNTliNjcwMmZlZTNjYjkzYjg4MDYwZmI3IiwiX192IjowfSx7Il9pZCI6IjU5YjY3MmQ1Nzc5ZDBhNTE5MDVjZWVkYSIsInR5cGUiOiJodHRwOi8vd3d3LmR5bmFtby5jb20vcHJvY2VzcyIsImRlc2NyaXB0aW9uIjoiTWFuYWdlIFJlcG9ydHMiLCJ2YWx1ZSI6IjU5YjY3MmQ1NzNmZmE4NTE5MDU0Mjk3YSIsIl9fdiI6MH0seyJfaWQiOiI1OWJkZDg3MjJhMDA4ODFhNWM5OTRiMTciLCJ0eXBlIjoiaHR0cDovL3d3dy5keW5hbW8uY29tL3Byb2Nlc3NvciIsImRlc2NyaXB0aW9uIjoiR2V0IFN0YWZmIiwidmFsdWUiOiI1OWJkZDg3MjA1ODMxMzFhNWMwZDc2M2QiLCJfX3YiOjB9LHsiX2lkIjoiNTliZGQ4NzIyYTAwODgxYTVjOTk0YjE4IiwidHlwZSI6Imh0dHA6Ly93d3cuZHluYW1vLmNvbS9wcm9jZXNzb3IiLCJkZXNjcmlwdGlvbiI6IlVwZGF0ZSBTdGFmZiIsInZhbHVlIjoiNTliZGQ4NzIwNTgzMTMxYTVjMGQ3NjNjIiwiX192IjowfSx7Il9pZCI6IjU5YmRkODcyMmEwMDg4MWE1Yzk5NGIxNiIsInR5cGUiOiJodHRwOi8vd3d3LmR5bmFtby5jb20vcHJvY2Vzc29yIiwiZGVzY3JpcHRpb24iOiJDcmVhdGUgU3RhZmYiLCJ2YWx1ZSI6IjU5YmRkODcyMDU4MzEzMWE1YzBkNzYzYiIsIl9fdiI6MH0seyJfaWQiOiI1OWMyODQyNWY0NjU5YjIxOTAyOGEyZjgiLCJ0eXBlIjoiaHR0cDovL3d3dy5keW5hbW8uY29tL3Byb2Nlc3NvciIsImRlc2NyaXB0aW9uIjoiQ3JlYXRlIFBheW1lbnRUeXBlIiwidmFsdWUiOiI1OWMyODQyNTQ2Nzc0MjIxOTBhYmQ2NzMiLCJfX3YiOjB9LHsiX2lkIjoiNTljMjg0MjVmNDY1OWIyMTkwMjhhMmZhIiwidHlwZSI6Imh0dHA6Ly93d3cuZHluYW1vLmNvbS9wcm9jZXNzb3IiLCJkZXNjcmlwdGlvbiI6IlVwZGF0ZSBQYXltZW50VHlwZSIsInZhbHVlIjoiNTljMjg0MjU0Njc3NDIyMTkwYWJkNjc0IiwiX192IjowfSx7Il9pZCI6IjU5YzI4NDI1ZjQ2NTliMjE5MDI4YTJmOSIsInR5cGUiOiJodHRwOi8vd3d3LmR5bmFtby5jb20vcHJvY2Vzc29yIiwiZGVzY3JpcHRpb24iOiJHZXQgUGF5bWVudFR5cGUiLCJ2YWx1ZSI6IjU5YzI4NDI1NDY3NzQyMjE5MGFiZDY3NSIsIl9fdiI6MH0seyJfaWQiOiI1OWMyODQyNWY0NjU5YjIxOTAyOGEyZmIiLCJ0eXBlIjoiaHR0cDovL3d3dy5keW5hbW8uY29tL3Byb2Nlc3MiLCJkZXNjcmlwdGlvbiI6Ik1hbmFnZSBQYXltZW50VHlwZSIsInZhbHVlIjoiNTljMjg0MjU0Njc3NDIyMTkwYWJkNjc4IiwiX192IjowfSx7Il9pZCI6IjU5ZGNkYjg2YmQ2OGZjMWZmODBhYzYxZiIsInR5cGUiOiJodHRwOi8vd3d3LmR5bmFtby5jb20vcHJvY2Vzc29yIiwiZGVzY3JpcHRpb24iOiJHZXQgUnVsZXMiLCJ2YWx1ZSI6IjU5ZGNkYjg2OWFmNjlkMWZmOGFkZTA4NyIsIl9fdiI6MH0seyJfaWQiOiI1OWRjZGJkZmJkNjhmYzFmZjgwYWM2MjAiLCJ0eXBlIjoiaHR0cDovL3d3dy5keW5hbW8uY29tL3Byb2Nlc3NvciIsImRlc2NyaXB0aW9uIjoiQ3JlYXRlIEhvc3RlbCBSdWxlIiwidmFsdWUiOiI1OWRjZGJkZjlhZjY5ZDFmZjhhZGUwODgiLCJfX3YiOjB9LHsiX2lkIjoiNTlkY2ViZGViZDY4ZmMxZmY4MGFjNjI2IiwidHlwZSI6Imh0dHA6Ly93d3cuZHluYW1vLmNvbS9wcm9jZXNzb3IiLCJkZXNjcmlwdGlvbiI6IlVwZGF0ZSBIb3N0ZWwgUnVsZSIsInZhbHVlIjoiNTlkY2ViZGU5YWY2OWQxZmY4YWRlMDg5IiwiX192IjowfSx7Il9pZCI6IjU5ZGNkYTQwYmQ2OGZjMWZmODBhYzYxYyIsInR5cGUiOiJodHRwOi8vd3d3LmR5bmFtby5jb20vcHJvY2Vzc29yIiwiZGVzY3JpcHRpb24iOiJHZXQgSG9zdGVscyIsInZhbHVlIjoiNTlkY2RhNDA5YWY2OWQxZmY4YWRlMDg0IiwiX192IjowfSx7Il9pZCI6IjU5ZGNkYWQxYmQ2OGZjMWZmODBhYzYxZCIsInR5cGUiOiJodHRwOi8vd3d3LmR5bmFtby5jb20vcHJvY2Vzc29yIiwiZGVzY3JpcHRpb24iOiJDcmVhdGUgSG9zdGVsIiwidmFsdWUiOiI1OWRjZGFkMTlhZjY5ZDFmZjhhZGUwODUiLCJfX3YiOjB9LHsiX2lkIjoiNTlkY2RiMmNiZDY4ZmMxZmY4MGFjNjFlIiwidHlwZSI6Imh0dHA6Ly93d3cuZHluYW1vLmNvbS9wcm9jZXNzb3IiLCJkZXNjcmlwdGlvbiI6IlVwZGF0ZSBIb3N0ZWwiLCJ2YWx1ZSI6IjU5ZGNkYjJjOWFmNjlkMWZmOGFkZTA4NiIsIl9fdiI6MH0seyJfaWQiOiI1OWRjZDNhYmJkNjhmYzFmZjgwYWM2MWEiLCJ0eXBlIjoiaHR0cDovL3d3dy5keW5hbW8uY29tL3Byb2Nlc3MiLCJkZXNjcmlwdGlvbiI6Ikhvc3RlbCBBbGxvY2F0aW9uIiwidmFsdWUiOiI1OWRjZDNhYjlhZjY5ZDFmZjhhZGUwODIiLCJfX3YiOjB9LHsiX2lkIjoiNTlkZTc0NzkxYTFmOTUyZTUwNWM5M2RhIiwidHlwZSI6Imh0dHA6Ly93d3cuZHluYW1vLmNvbS9wcm9jZXNzb3IiLCJkZXNjcmlwdGlvbiI6IkdldCBIb3N0ZWwgUnVsZSIsInZhbHVlIjoiNTlkZTc0NzlmYWNiODkyZTUwYWJiZjgzIiwiX192IjowfSx7Il9pZCI6IjU5ZGU5ZGVjMDA3ZDQ3MzFhOGFiZGFlNSIsInR5cGUiOiJodHRwOi8vd3d3LmR5bmFtby5jb20vcHJvY2VzcyIsImRlc2NyaXB0aW9uIjoiTWFuYWdlIEhvc3RlbHMiLCJ2YWx1ZSI6IjU5ZGU5ZGVjNzhiNzc3MzFhODA0YmY2YiIsIl9fdiI6MH0seyJfaWQiOiI1OWRhMDU5Zjk3ZjBjZTMwMWMxZmU3NjAiLCJ0eXBlIjoiaHR0cDovL3d3dy5keW5hbW8uY29tL3Byb2Nlc3NvciIsImRlc2NyaXB0aW9uIjoiR2V0IENhbXB1c2VzIiwidmFsdWUiOiI1OWQ5ZmYwOGUyOGNhZDA4MjQ2NTZhN2MiLCJfX3YiOjB9LHsiX2lkIjoiNTlmMjBiNGJmMzk5YjAyZDUwNWViZDA4IiwidHlwZSI6Imh0dHA6Ly93d3cuZHluYW1vLmNvbS9wcm9jZXNzb3IiLCJkZXNjcmlwdGlvbiI6IkdldCBTZW1lc3RlciIsInZhbHVlIjoiNTlmMjBiNGI1ZTg5OGQyZDUwNTFmMzUxIiwiX192IjowfSx7Il9pZCI6IjU5ZjIwYjRiZjM5OWIwMmQ1MDVlYmQwOSIsInR5cGUiOiJodHRwOi8vd3d3LmR5bmFtby5jb20vcHJvY2Vzc29yIiwiZGVzY3JpcHRpb24iOiJVcGRhdGUgU2VtZXN0ZXIiLCJ2YWx1ZSI6IjU5ZjIwYjRiNWU4OThkMmQ1MDUxZjM1MCIsIl9fdiI6MH0seyJfaWQiOiI1OWYyMGI0YmYzOTliMDJkNTA1ZWJkMDciLCJ0eXBlIjoiaHR0cDovL3d3dy5keW5hbW8uY29tL3Byb2Nlc3NvciIsImRlc2NyaXB0aW9uIjoiQ3JlYXRlIFNlbWVzdGVyIiwidmFsdWUiOiI1OWYyMGI0YjVlODk4ZDJkNTA1MWYzNGYiLCJfX3YiOjB9LHsiX2lkIjoiNTlmMjBiNGJmMzk5YjAyZDUwNWViZDBhIiwidHlwZSI6Imh0dHA6Ly93d3cuZHluYW1vLmNvbS9wcm9jZXNzIiwiZGVzY3JpcHRpb24iOiJNYW5hZ2UgU2VtZXN0ZXIiLCJ2YWx1ZSI6IjU5ZjIwYjRiNWU4OThkMmQ1MDUxZjM1NCIsIl9fdiI6MH0seyJfaWQiOiI1OWY0OGM4NGE2YmMzZTQwMWNiNzBmNDkiLCJ0eXBlIjoiaHR0cDovL3d3dy5keW5hbW8uY29tL3Byb2Nlc3NvciIsImRlc2NyaXB0aW9uIjoiR2V0IENvdXJzZVR5cGUiLCJ2YWx1ZSI6IjU5ZjQ4Yzg0ZGNmMjVhNDAxY2Y3MTc3YiIsIl9fdiI6MH0seyJfaWQiOiI1OWY0OGM4NGE2YmMzZTQwMWNiNzBmNDgiLCJ0eXBlIjoiaHR0cDovL3d3dy5keW5hbW8uY29tL3Byb2Nlc3NvciIsImRlc2NyaXB0aW9uIjoiQ3JlYXRlIENvdXJzZVR5cGUiLCJ2YWx1ZSI6IjU5ZjQ4Yzg0ZGNmMjVhNDAxY2Y3MTc3OSIsIl9fdiI6MH0seyJfaWQiOiI1OWY0OGM4NGE2YmMzZTQwMWNiNzBmNGEiLCJ0eXBlIjoiaHR0cDovL3d3dy5keW5hbW8uY29tL3Byb2Nlc3NvciIsImRlc2NyaXB0aW9uIjoiVXBkYXRlIENvdXJzZVR5cGUiLCJ2YWx1ZSI6IjU5ZjQ4Yzg0ZGNmMjVhNDAxY2Y3MTc3YSIsIl9fdiI6MH0seyJfaWQiOiI1OWY0OGM4NGE2YmMzZTQwMWNiNzBmNGIiLCJ0eXBlIjoiaHR0cDovL3d3dy5keW5hbW8uY29tL3Byb2Nlc3MiLCJkZXNjcmlwdGlvbiI6Ik1hbmFnZSBDb3Vyc2VUeXBlIiwidmFsdWUiOiI1OWY0OGM4NGRjZjI1YTQwMWNmNzE3N2UiLCJfX3YiOjB9LHsiX2lkIjoiNWE2Y2JmMTUyMzI2ZjgzMjQwYTBmZDYzIiwidHlwZSI6Imh0dHA6Ly93d3cuZHluYW1vLmNvbS9wcm9jZXNzb3IiLCJkZXNjcmlwdGlvbiI6Ikxpc3Qgc3RlcHMiLCJ2YWx1ZSI6IjVhNmNiZjE1NTQxOTdkMzI0MDYzYTY1ZCIsIl9fdiI6MH0seyJfaWQiOiI1YTZkZmYxZGRjZjEyMTBlNjQwNzg5NjQiLCJ0eXBlIjoiaHR0cDovL3d3dy5keW5hbW8uY29tL3Byb2Nlc3NvciIsImRlc2NyaXB0aW9uIjoiVXBkYXRlIE9MZXZlbEdyYWRlIiwidmFsdWUiOiI1YTZkZmYxZDVmZTc3YzBlNjQwMTA0MzkiLCJfX3YiOjB9LHsiX2lkIjoiNWE2ZGZmMWRkY2YxMjEwZTY0MDc4OTYyIiwidHlwZSI6Imh0dHA6Ly93d3cuZHluYW1vLmNvbS9wcm9jZXNzb3IiLCJkZXNjcmlwdGlvbiI6IkNyZWF0ZSBPTGV2ZWxHcmFkZSIsInZhbHVlIjoiNWE2ZGZmMWQ1ZmU3N2MwZTY0MDEwNDM4IiwiX192IjowfSx7Il9pZCI6IjVhNmRmZjFkZGNmMTIxMGU2NDA3ODk2NSIsInR5cGUiOiJodHRwOi8vd3d3LmR5bmFtby5jb20vcHJvY2VzcyIsImRlc2NyaXB0aW9uIjoiTWFuYWdlIE9MZXZlbEdyYWRlIiwidmFsdWUiOiI1YTZkZmYxZDVmZTc3YzBlNjQwMTA0M2QiLCJfX3YiOjB9LHsiX2lkIjoiNWE2ZTAxODMxMjkwY2E0Y2YwMGIxODNkIiwidHlwZSI6Imh0dHA6Ly93d3cuZHluYW1vLmNvbS9wcm9jZXNzb3IiLCJkZXNjcmlwdGlvbiI6IlVwZGF0ZSBPTGV2ZWxTdWJqZWN0IiwidmFsdWUiOiI1YTZlMDE4M2Q1OGIxNjRjZjBkNDZmNmUiLCJfX3YiOjB9LHsiX2lkIjoiNWE2ZTAxODMxMjkwY2E0Y2YwMGIxODNiIiwidHlwZSI6Imh0dHA6Ly93d3cuZHluYW1vLmNvbS9wcm9jZXNzb3IiLCJkZXNjcmlwdGlvbiI6IkNyZWF0ZSBPTGV2ZWxTdWJqZWN0IiwidmFsdWUiOiI1YTZlMDE4M2Q1OGIxNjRjZjBkNDZmNmQiLCJfX3YiOjB9LHsiX2lkIjoiNWE2ZTAxODMxMjkwY2E0Y2YwMGIxODNlIiwidHlwZSI6Imh0dHA6Ly93d3cuZHluYW1vLmNvbS9wcm9jZXNzIiwiZGVzY3JpcHRpb24iOiJNYW5hZ2UgT0xldmVsU3ViamVjdCIsInZhbHVlIjoiNWE2ZTAxODNkNThiMTY0Y2YwZDQ2ZjcyIiwiX192IjowfSx7Il9pZCI6IjVhN2IwMDZlOGVhM2MzMjlkYzRmYWFkNSIsInR5cGUiOiJodHRwOi8vd3d3LmR5bmFtby5jb20vcHJvY2Vzc29yIiwiZGVzY3JpcHRpb24iOiJHZXQgVU5OX1B1dG1lX1Jlc3VsdCIsInZhbHVlIjoiNWE3YjAwNmUyOTFhZjIyOWRjYjE4ZTM2IiwiX192IjowfSx7Il9pZCI6IjVhN2IwMDZlOGVhM2MzMjlkYzRmYWFkNiIsInR5cGUiOiJodHRwOi8vd3d3LmR5bmFtby5jb20vcHJvY2Vzc29yIiwiZGVzY3JpcHRpb24iOiJVcGRhdGUgVU5OX1B1dG1lX1Jlc3VsdCIsInZhbHVlIjoiNWE3YjAwNmUyOTFhZjIyOWRjYjE4ZTM1IiwiX192IjowfSx7Il9pZCI6IjVhN2IwMDZlOGVhM2MzMjlkYzRmYWFkNCIsInR5cGUiOiJodHRwOi8vd3d3LmR5bmFtby5jb20vcHJvY2Vzc29yIiwiZGVzY3JpcHRpb24iOiJDcmVhdGUgVU5OX1B1dG1lX1Jlc3VsdCIsInZhbHVlIjoiNWE3YjAwNmUyOTFhZjIyOWRjYjE4ZTM0IiwiX192IjowfSx7Il9pZCI6IjVhN2IwMDZlOGVhM2MzMjlkYzRmYWFkNyIsInR5cGUiOiJodHRwOi8vd3d3LmR5bmFtby5jb20vcHJvY2VzcyIsImRlc2NyaXB0aW9uIjoiTWFuYWdlIFVOTl9QdXRtZV9SZXN1bHQiLCJ2YWx1ZSI6IjVhN2IwMDZlMjkxYWYyMjlkY2IxOGUzOSIsIl9fdiI6MH0seyJfaWQiOiI1YTg2YmIxZTI0NmFhYjM4YWM4NDVjYzQiLCJ0eXBlIjoiY2FuLW1hbmFnZS1taWdyYXRpb25zIiwiZGVzY3JpcHRpb24iOiJjYW4tbWFuYWdlLW1pZ3JhdGlvbnMiLCJfX3YiOjB9LHsiX2lkIjoiNWE4ZTc1Zjk4MGU3Nzk0ZDY0ODkxZmYxIiwidHlwZSI6Imh0dHA6Ly93d3cuZHluYW1vLmNvbS9wcm9jZXNzb3IiLCJkZXNjcmlwdGlvbiI6IkdldF9GZWVfUHVycG9zZV9Hcm91cHMiLCJ2YWx1ZSI6IjVhOGU3NWY5Njc3NTFlNGQ2NDE0ZmRkNSIsIl9fdiI6MH0seyJfaWQiOiI1YThjMDdkNDcxZjFlNDM3OThhOTllYTYiLCJ0eXBlIjoiaHR0cDovL3d3dy5keW5hbW8uY29tL3Byb2Nlc3NvciIsImRlc2NyaXB0aW9uIjoiR2V0X1llYXJfT2ZfU3R1ZHlfR3JvdXBzIiwidmFsdWUiOiI1YThjMDdkNGJmNWE2NjM3OThiZGQyYTEiLCJfX3YiOjB9LHsiX2lkIjoiNWE4YzBiZDc3MWYxZTQzNzk4YTk5ZWFiIiwidHlwZSI6Imh0dHA6Ly93d3cuZHluYW1vLmNvbS9wcm9jZXNzb3IiLCJkZXNjcmlwdGlvbiI6IkdldF9QYXltZW50X1R5cGVfR3JvdXBzIiwidmFsdWUiOiI1YThjMGJkN2JmNWE2NjM3OThiZGQyYTMiLCJfX3YiOjB9LHsiX2lkIjoiNWE4YWI2MzBmMzIxMDcyNWI4NDkzODM3IiwidHlwZSI6Imh0dHA6Ly93d3cuZHluYW1vLmNvbS9wcm9jZXNzb3IiLCJkZXNjcmlwdGlvbiI6IkdldF9NZW51X0dyb3VwcyIsInZhbHVlIjoiNWE4YWI2MzAwYTRiNGEyNWI4ZjQ3NGRiIiwiX192IjowfSx7Il9pZCI6IjVhODZhZTk2OWE2NWU5MzZjMGY1NzNmZSIsInR5cGUiOiJodHRwOi8vd3d3LmR5bmFtby5jb20vcHJvY2Vzc29yIiwiZGVzY3JpcHRpb24iOiJHZXRfTWVudV9UeXBlcyIsInZhbHVlIjoiNWE4NmFlOTZiYWQzNzgzNmMwYTJlZDFmIiwiX192IjowfSx7Il9pZCI6IjVhODZlZWNiOTRjNWY1M2RmODQ5N2NlOSIsInR5cGUiOiJodHRwOi8vd3d3LmR5bmFtby5jb20vcHJvY2Vzc29yIiwiZGVzY3JpcHRpb24iOiJHZXRfTWVudV9DYXRlZ29yaWVzIiwidmFsdWUiOiI1YTg2ZWVjYmMwNmNlYTNkZjg5NmE1ZjgiLCJfX3YiOjB9LHsiX2lkIjoiNWE4YmZmMjk3MWYxZTQzNzk4YTk5ZWE0IiwidHlwZSI6Imh0dHA6Ly93d3cuZHluYW1vLmNvbS9wcm9jZXNzb3IiLCJkZXNjcmlwdGlvbiI6IkdldF9TdHVkZW50X1R5cGVfR3JvdXBzIiwidmFsdWUiOiI1YThiZmYyOWJmNWE2NjM3OThiZGQyOWUiLCJfX3YiOjB9LHsiX2lkIjoiNWE4YmRkNzNmNTQ1NjQzNjE0ZDgyYmU5IiwidHlwZSI6Imh0dHA6Ly93d3cuZHluYW1vLmNvbS9wcm9jZXNzb3IiLCJkZXNjcmlwdGlvbiI6IkdldF9TY2hvb2xfUHJvZ3JhbW1lX0dyb3VwcyIsInZhbHVlIjoiNWE4YmRkNzNjODIwNjczNjE0ZTFjNGViIiwiX192IjowfSx7Il9pZCI6IjVhOTUyOWMwY2JiMGYwMzkyODkwZDIwOCIsInR5cGUiOiJodHRwOi8vd3d3LmR5bmFtby5jb20vcHJvY2VzcyIsImRlc2NyaXB0aW9uIjoiR2VuZXJhdGUgQXBwbGljYXRpb24gRm9ybSBUZW1wbGF0ZSIsInZhbHVlIjoiNWE5NTI5YzA5NjRmYzczOTI4ZTg1NWNmIiwiX192IjowfSx7Il9pZCI6IjVhOTUyYTY2Y2JiMGYwMzkyODkwZDIwOSIsInR5cGUiOiJodHRwOi8vd3d3LmR5bmFtby5jb20vcHJvY2Vzc29yIiwiZGVzY3JpcHRpb24iOiJDcmVhdGUgQXBwbGljYXRpb24gUHJvY2VzcyIsInZhbHVlIjoiNWE5NTJhNjY5NjRmYzczOTI4ZTg1NWQwIiwiX192IjowfSx7Il9pZCI6IjU5YzVjNmIwZTMxNTdiNGFlNDc5OGJiMyIsInR5cGUiOiJodHRwOi8vd3d3LmR5bmFtby5jb20vcHJvY2Vzc29yIiwiZGVzY3JpcHRpb24iOiJHZXQgRmVlUHVycG9zZSIsInZhbHVlIjoiNTljNWM2YjA3MzdiOWM0YWU0NDI2Mzk4IiwiX192IjowfSx7Il9pZCI6IjVhOTljMGRiN2YwOGQ3MzNhODUxNTY2NSIsInR5cGUiOiJodHRwOi8vd3d3LmR5bmFtby5jb20vcHJvY2Vzc29yIiwiZGVzY3JpcHRpb24iOiJDcmVhdGUgRGlyZWN0RW50cnlHcmFkZSIsInZhbHVlIjoiNWE5OWMwZGJmNGUxYjMzM2E4NWRhY2E2IiwiX192IjowfSx7Il9pZCI6IjVhOTljMGRiN2YwOGQ3MzNhODUxNTY2NyIsInR5cGUiOiJodHRwOi8vd3d3LmR5bmFtby5jb20vcHJvY2Vzc29yIiwiZGVzY3JpcHRpb24iOiJVcGRhdGUgRGlyZWN0RW50cnlHcmFkZSIsInZhbHVlIjoiNWE5OWMwZGJmNGUxYjMzM2E4NWRhY2E3IiwiX192IjowfSx7Il9pZCI6IjVhOTljMGRiN2YwOGQ3MzNhODUxNTY2OCIsInR5cGUiOiJodHRwOi8vd3d3LmR5bmFtby5jb20vcHJvY2VzcyIsImRlc2NyaXB0aW9uIjoiTWFuYWdlIERpcmVjdEVudHJ5R3JhZGUiLCJ2YWx1ZSI6IjVhOTljMGRiZjRlMWIzMzNhODVkYWNhYiIsIl9fdiI6MH0seyJfaWQiOiI1YTk5YzExYjdmMDhkNzMzYTg1MTU2NmMiLCJ0eXBlIjoiaHR0cDovL3d3dy5keW5hbW8uY29tL3Byb2Nlc3NvciIsImRlc2NyaXB0aW9uIjoiVXBkYXRlIERpcmVjdF9FbnRyeV9DZXJ0aWZpY2F0ZV9UeXBlIiwidmFsdWUiOiI1YTk5YzExYmY0ZTFiMzMzYTg1ZGFjYWUiLCJfX3YiOjB9LHsiX2lkIjoiNWE5OWMxMWI3ZjA4ZDczM2E4NTE1NjZhIiwidHlwZSI6Imh0dHA6Ly93d3cuZHluYW1vLmNvbS9wcm9jZXNzb3IiLCJkZXNjcmlwdGlvbiI6IkNyZWF0ZSBEaXJlY3RfRW50cnlfQ2VydGlmaWNhdGVfVHlwZSIsInZhbHVlIjoiNWE5OWMxMWJmNGUxYjMzM2E4NWRhY2FkIiwiX192IjowfSx7Il9pZCI6IjVhOTljMTFiN2YwOGQ3MzNhODUxNTY2ZCIsInR5cGUiOiJodHRwOi8vd3d3LmR5bmFtby5jb20vcHJvY2VzcyIsImRlc2NyaXB0aW9uIjoiTWFuYWdlIERpcmVjdF9FbnRyeV9DZXJ0aWZpY2F0ZV9UeXBlIiwidmFsdWUiOiI1YTk5YzExYmY0ZTFiMzMzYTg1ZGFjYjIiLCJfX3YiOjB9LHsiX2lkIjoiNWFhNDE4MzMzYTE4ZmEyNmM4ZTY5ZWVmIiwidHlwZSI6Imh0dHA6Ly93d3cuZHluYW1vLmNvbS9wcm9jZXNzb3IiLCJkZXNjcmlwdGlvbiI6IkNyZWF0ZSBUaW1lZE5vdGlmaWNhdGlvbiIsInZhbHVlIjoiNWFhNDE4MzM2NGExY2UyNmM4M2M3M2MxIiwiX192IjowfSx7Il9pZCI6IjVhYTQxODMzM2ExOGZhMjZjOGU2OWVmMCIsInR5cGUiOiJodHRwOi8vd3d3LmR5bmFtby5jb20vcHJvY2Vzc29yIiwiZGVzY3JpcHRpb24iOiJHZXQgVGltZWROb3RpZmljYXRpb24iLCJ2YWx1ZSI6IjVhYTQxODMzNjRhMWNlMjZjODNjNzNjMyIsIl9fdiI6MH0seyJfaWQiOiI1YWE0MTgzMzNhMThmYTI2YzhlNjllZjEiLCJ0eXBlIjoiaHR0cDovL3d3dy5keW5hbW8uY29tL3Byb2Nlc3NvciIsImRlc2NyaXB0aW9uIjoiVXBkYXRlIFRpbWVkTm90aWZpY2F0aW9uIiwidmFsdWUiOiI1YWE0MTgzMzY0YTFjZTI2YzgzYzczYzIiLCJfX3YiOjB9LHsiX2lkIjoiNWFhNDE4MzMzYTE4ZmEyNmM4ZTY5ZWYyIiwidHlwZSI6Imh0dHA6Ly93d3cuZHluYW1vLmNvbS9wcm9jZXNzIiwiZGVzY3JpcHRpb24iOiJNYW5hZ2UgVGltZWROb3RpZmljYXRpb24iLCJ2YWx1ZSI6IjVhYTQxODMzNjRhMWNlMjZjODNjNzNjNiIsIl9fdiI6MH0seyJfaWQiOiI1YWE0MWE0MjNhMThmYTI2YzhlNjllZjQiLCJ0eXBlIjoiaHR0cDovL3d3dy5keW5hbW8uY29tL3Byb2Nlc3NvciIsImRlc2NyaXB0aW9uIjoiQ3JlYXRlIERpc3NtaXNzYWJsZU5vdGlmaWNhdGlvbiIsInZhbHVlIjoiNWFhNDFhNDI2NGExY2UyNmM4M2M3M2M4IiwiX192IjowfSx7Il9pZCI6IjVhYTQxYTQyM2ExOGZhMjZjOGU2OWVmNiIsInR5cGUiOiJodHRwOi8vd3d3LmR5bmFtby5jb20vcHJvY2Vzc29yIiwiZGVzY3JpcHRpb24iOiJVcGRhdGUgRGlzc21pc3NhYmxlTm90aWZpY2F0aW9uIiwidmFsdWUiOiI1YWE0MWE0MjY0YTFjZTI2YzgzYzczYzkiLCJfX3YiOjB9LHsiX2lkIjoiNWFhNDFhNDIzYTE4ZmEyNmM4ZTY5ZWY1IiwidHlwZSI6Imh0dHA6Ly93d3cuZHluYW1vLmNvbS9wcm9jZXNzb3IiLCJkZXNjcmlwdGlvbiI6IkdldCBEaXNzbWlzc2FibGVOb3RpZmljYXRpb24iLCJ2YWx1ZSI6IjVhYTQxYTQyNjRhMWNlMjZjODNjNzNjYSIsIl9fdiI6MH0seyJfaWQiOiI1YWE0MWE0MjNhMThmYTI2YzhlNjllZjciLCJ0eXBlIjoiaHR0cDovL3d3dy5keW5hbW8uY29tL3Byb2Nlc3MiLCJkZXNjcmlwdGlvbiI6Ik1hbmFnZSBEaXNzbWlzc2FibGVOb3RpZmljYXRpb24iLCJ2YWx1ZSI6IjVhYTQxYTQyNjRhMWNlMjZjODNjNzNjZCIsIl9fdiI6MH0seyJfaWQiOiI1YWFjZmY3OTViZTExNDU3MmNiMjkxODgiLCJ0eXBlIjoiaHR0cDovL3d3dy5keW5hbW8uY29tL3Byb2Nlc3NvciIsImRlc2NyaXB0aW9uIjoiQ3JlYXRlIE9MZXZlbEV4YW1UeXBlIiwidmFsdWUiOiI1YWFjZmY3OTM4OGJlZTU3MmNmY2YyZGQiLCJfX3YiOjB9LHsiX2lkIjoiNWFhY2ZmNzk1YmUxMTQ1NzJjYjI5MThhIiwidHlwZSI6Imh0dHA6Ly93d3cuZHluYW1vLmNvbS9wcm9jZXNzb3IiLCJkZXNjcmlwdGlvbiI6IlVwZGF0ZSBPTGV2ZWxFeGFtVHlwZSIsInZhbHVlIjoiNWFhY2ZmNzkzODhiZWU1NzJjZmNmMmRlIiwiX192IjowfSx7Il9pZCI6IjVhYWNmZjc5NWJlMTE0NTcyY2IyOTE4YiIsInR5cGUiOiJodHRwOi8vd3d3LmR5bmFtby5jb20vcHJvY2VzcyIsImRlc2NyaXB0aW9uIjoiTWFuYWdlIE9MZXZlbEV4YW1UeXBlIiwidmFsdWUiOiI1YWFjZmY3OTM4OGJlZTU3MmNmY2YyZTIiLCJfX3YiOjB9LHsiX2lkIjoiNWE1ZjM4ZTA0NzY1MWExMzI0NDkzNGQ5IiwidHlwZSI6Imh0dHA6Ly93d3cuZHluYW1vLmNvbS9wcm9jZXNzb3IiLCJkZXNjcmlwdGlvbiI6IlNhbXBsZSBQcm9jZXNzb3IiLCJ2YWx1ZSI6IjVhNWYzOGUwZWFjYmY1MTMyNDg2NTIxMSIsIl9fdiI6MH0seyJfaWQiOiI1Y2UyYTBkMzZjOWU4ZDJmZDQ2OGIxYjUiLCJ0eXBlIjoiaHR0cDovL3d3dy5keW5hbW8uY29tL3Byb2Nlc3MiLCJkZXNjcmlwdGlvbiI6IkNyZWF0ZSBHZW5lcmljIEZvcm1zIiwidmFsdWUiOiI1Y2UyYTBkMzZjOWU4ZDJmZDQ2OGIxYjMiLCJfX3YiOjB9LHsiX2lkIjoiNWNlMmEwZDM2YzllOGQyZmQ0NjhiMWI0IiwidHlwZSI6Imh0dHA6Ly93d3cuZHluYW1vLmNvbS9wcm9jZXNzb3IiLCJkZXNjcmlwdGlvbiI6ImdlbmVyYXRlIGFwcGxpY2F0aW9uIGZvcm0iLCJ2YWx1ZSI6IjVjZGQ0YTkyNDlmNDE1MjcxOGRmMjFlZiIsIl9fdiI6MH0seyJfaWQiOiI1Y2U1MjVmYjU0Y2RlMzU4MmM5MzAyMTciLCJ0eXBlIjoiaHR0cDovL3d3dy5keW5hbW8uY29tL3Byb2Nlc3MiLCJkZXNjcmlwdGlvbiI6Ik1hbmFnZSBHZW5lcmljIEZvcm1zIiwidmFsdWUiOiI1Y2U1MjVmYjU0Y2RlMzU4MmM5MzAyMTYiLCJfX3YiOjB9XSwiX192IjowLCJkb21haW4iOm51bGx9XSwiY2xhaW1zIjpbXSwiYWN0aXZhdGVkIjp0cnVlLCJjbGllbnQiOnsiY2xpZW50SWQiOiJuMndaQVNOdW5VU2hGMnhRMG80UDQ0eEltZVNYNmhsbSJ9fSwiaWF0IjoxNTY0NjYwNjMxLCJhdWQiOiJzZWFkcmFnb246bW9kdWxlcyIsImlzcyI6InNlYWRyYWdvbjphdXRoZW50aWNhdGlvbl9zZXJ2ZXIifQ.vv68nn1tpO96423s2pLPko39MIdmst9fut-fygeznbM"
  },
  secure: true,
  changeOrigin: true
});

var httpProxyRules = {
  rules: {
    ".*/testProxy": "https://localhost:4433"
  },
  default: "http://localhost:3000"
};

var proxyRules = new HttpProxyRules(httpProxyRules);

var httpsServer = http.createServer(/* {
  key: fs.readFileSync("proxy-server-key.pem"),
  cert: fs.readFileSync("proxy-server-crt.pem")
},  */(req, res) => {

    var target = proxyRules.match(req);

    console.log(target);
    switch (target) {
      case "https://localhost:4433":
        proxyToDynamo.web(req, res, err => {
          if (err) {
            console.log(err);
            res.writeHead(500, {
              "Content-Type": "application/json"
            });
            res.end(
              JSON.stringify({
                message:
                  "An error occurred while proxying request",
                error: err
              })
            );
          }

          res.writeHead(200, {
            "Content-Type": "application/json"
          });
          res.end(
            JSON.stringify({
              message:
                "Request was successfully proxied"
            })
          );
        });
        break;
      default:
        res.writeHead(200, {
          "Content-Type": "application/json"
        });
        res.end(
          JSON.stringify({
            message:
              "There was no proxying involved"
          })
        );
    }

  })

httpsServer.on("error", function () {
  console.log(arguments);
});


httpsServer.listen(5000, function () {
  console.log("http proxy started on port 5000");
});